(function(t){function e(e){for(var a,s,u=e[0],i=e[1],c=e[2],f=0,h=[];f<u.length;f++)s=u[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,u=1;u<n.length;u++){var i=n[u];0!==r[i]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/lunarcalendar/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=i;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02a2":function(t,e,n){n("99af"),n("4de4"),n("caad"),n("c975"),n("d81d"),n("b0c0"),n("d3b7"),n("25f0"),n("2532");var a=n("448a"),r=n("7969"),o=r.jieqi,s=r.shuoWang,u=r.ZhongqiNames,i=r.getTomorrow;function c(t){var e={},n=o(t-1),a=o(t);e.terms=a.map((function(t){return{name:t.name,date:new Date(t.date)}}));var r=o(t+1),u=s(t-1),i=s(t);e.shuoWangs=i.map((function(t){return{name:t.name,date:new Date(t.date)}}));var c=s(t+1),h=f(u,i,c,n,a,r),d=l(h,t);return e.mixedTerms=h,e.calendar=d,e}function l(t,e){for(var n=[],a=0;a<t.length;a++)t[a].month&&("初一"==t[a].names[0]?t[a].day=1:t[a].day=Math.round((t[a].date-t[a-1].date)/864e5)+t[a-1].day,n.push(t[a]));for(var r,o=[],s=0;s<n.length-1;s++){o.push(n[s]),r=i(n[s].date);var u=1;while(r<n[s+1].date)o.push({names:[],month:n[s].month,leap:n[s].leap,day:n[s].day+u,date:r}),u++,r=i(r)}return o.filter((function(t){return t.date.getFullYear()==e}))}function f(t,e,n,r,o,s){for(var u=t.concat(e).concat(n).concat(r).concat(o).concat(s).filter((function(t){return"望"!=t.name})).map((function(t){return t.date.setHours(0,0,0,0),t})).sort((function(t,e){return t.date-e.date})),i=[],c=u[0].date,l=[u[0].name],f=1;f<u.length;f++)u[f].date-c==0?l.push(u[f].name):(i.push({date:c,names:a(l)}),c=u[f].date,l=[u[f].name]);return i.push({date:c,names:a(l)}),d(i),i}function h(t,e,n){for(var a=!1,r=e;r<n;r++)for(var o=0;o<t[r].names.length;o++)if(u.includes(t[r].names[o]))return!0;return a}function d(t){for(var e=[],n=[],a=0;a<t.length;a++)t[a].names.includes("冬至")&&e.push(a),t[a].names.includes("初一")&&n.push(a);for(var r=[],o=0;o<e.length;o++)for(var s=n.length-1;s>=0;s--)if(n[s]<=e[o]){r.push(n[s]);break}for(var u=[],i=0;i<r.length-1;i++){for(var c=0,l=0;l<n.length;l++)n[l]>=r[i]&&n[l]<r[i+1]&&c++;c>12?u.push(!0):u.push(!1)}for(var f=0;f<r.length-1;f++)if(0==u[f])for(var d=10,p=r[f];p<r[f+1];p++)p>r[f]&&t[p].names.includes("初一")&&(d=(d+1)%12),t[p].month=d+1;else for(var v=10,m=!1,g=!1,_=r[f];_<r[f+1];_++){if(_>r[f]&&t[_].names.includes("初一")){var b=n.indexOf(_);h(t,_,n[b+1])||m?(v=(v+1)%12,g=!1):(g=!0,m=!0)}t[_].month=v+1,t[_].leap=g}}function p(t){var e,n=t.date.getDate().toString();return 0==t.names.length||1==t.names.length&&"初一"==t.names[0]?(e="".concat(t.month,"/").concat(t.day),t.leap&&(e="潤"+e)):e=t.names[t.names.length-1],[n,e]}t.exports={createLunarCalendar:c,getTwoRows:p}},"034f":function(t,e,n){"use strict";n("85ec")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("LunarCalendar")],1)},o=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("陰陽合曆")]),t._v(" 西元年度："),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.year,expression:"year",modifiers:{number:!0}}],staticStyle:{width:"60px"},attrs:{type:"number"},domProps:{value:t.year},on:{input:function(e){e.target.composing||(t.year=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("button",{staticStyle:{"font-size":"20pt"},on:{click:t.getSeason}},[t._v("計算")]),n("span",[t._v(t._s(t.message))]),n("section",t._l(t.monthTables,(function(e,a){return n("div",{key:a},[n("table",{staticStyle:{margin:"20px"}},[n("tr",[n("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v(t._s(a+1)+" 月")])]),t._m(0,!0),t._l(e,(function(e,a){return n("tr",{key:a},t._l(e,(function(e,a){return n("td",{key:a},[n("div",{staticStyle:{"text-align":"center",width:"50px"}},[t._v(t._s(t.getTwoRows(e)[0]))]),n("div",{staticStyle:{"text-align":"center",width:"50px"}},[t._v(t._s(t.getTwoRows(e)[1]))])])})),0)}))],2)])})),0),t.terms.length>0?n("table",{staticStyle:{margin:"20px"}},[t._m(1),t._l(t.terms,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.date))])])}))],2):t._e(),t.shuoWangs.length>0?n("table",{staticStyle:{margin:"20px"}},[t._m(2),t._l(t.shuoWangs,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.date))])])}))],2):t._e(),t.eclipses.length>0?n("table",{staticStyle:{margin:"20px"}},[t._m(3),t._l(t.eclipses,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.status))]),n("td",[t._v(t._s(e.date))])])}))],2):t._e()])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticStyle:{"background-color":"#dddddd"}},[n("td",{staticStyle:{"text-align":"center"}},[t._v("日")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("一")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("二")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("三")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("四")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("五")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("六")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("節氣")]),n("th",[t._v("時刻")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("朔望")]),n("th",[t._v("時刻")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("蝕況")]),n("th",[t._v("起始時刻")])])}],i=(n("99af"),n("4de4"),n("fb6a"),n("b0c0"),n("96cf"),n("1da1")),c=n("02a2"),l=n("b2a6"),f={name:"calender",data:function(){return{year:2020,terms:[],shuoWangs:[],mixedTerms:[],calendar:[],eclipses:[],message:"按計算鍵開始計算日曆，桌上型瀏覽器約需10秒，手機約需30秒",monthTables:[]}},computed:{},mounted:function(){},methods:{getSeason:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,o,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.message="計算中",e=Object(c["createLunarCalendar"])(this.year),this.terms=e.terms,this.shuoWangs=e.shuoWangs,this.mixedTerms=e.mixedTerms,this.calendar=e.calendar,n=[],a=0;case 8:if(!(a<this.shuoWangs.length)){t.next=29;break}if(r=l["julian"].DateToJDE(this.shuoWangs[a].date),o=l["julian"].JDEToDate(r-.5),s=l["julian"].JDEToDate(r+.5),u=[],"初一"!=this.shuoWangs[a].name){t.next=20;break}return this.message="計算 ".concat(this.shuoWangs[a].date," 是否發生日蝕"),t.next=17,Object(l["Eclipse"])(o,s,l["eclipseMap"].solar);case 17:u=t.sent,t.next=24;break;case 20:return this.message="計算 ".concat(this.shuoWangs[a].date," 是否發生月蝕"),t.next=23,Object(l["Eclipse"])(o,s,l["eclipseMap"].moon);case 23:u=t.sent;case 24:1==u.length&&"正常"==u[0].status&&(u=[]),u.length>0&&(n=n.concat(u));case 26:a++,t.next=8;break;case 29:this.eclipses=n,this.message="按計算鍵開始計算日曆，約需10秒(桌上型瀏覽器)",this.monthTables=this.constructMonthTable(),console.log(this.monthTables);case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTwoRows:function(t){return t?Object(c["getTwoRows"])(t):["",""]},constructMonthTable:function(){for(var t=this,e=[],n=function(n){for(var a=[],r=t.calendar.filter((function(t){return t.date.getMonth()==n})),o=[],s=r[0].date.getDay(),u=0;u<s;u++)o.push(null);o=o.concat(r);var i=Math.floor(o.length/7);o.length%7!=0&&(i+=1);for(var c=0;c<i;c++)a.push(o.slice(7*c,7*c+7));console.log(a.length),e.push(a)},a=0;a<12;a++)n(a);return e}}},h=f,d=(n("b74b"),n("2877")),p=Object(d["a"])(h,s,u,!1,null,null,null),v=p.exports,m={name:"App",components:{LunarCalendar:v}},g=m,_=(n("034f"),Object(d["a"])(g,r,o,!1,null,null,null)),b=_.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(b)}}).$mount("#app")},"743b":function(t,e,n){},7969:function(t,e,n){n("4de4");var a=n("3f2a"),r=a.julian,o=a.solar,s=a.planetposition,u=a.data,i=a.moonposition,c=new s.Planet(u.earth);function l(t){var e=o.apparentVSOP87(c,t).lon;return(180*e/Math.PI+360)%360}function f(t){var e=i.position(t).lon;return(180*e/Math.PI+360)%360}function h(t){return Math.floor(l(r.DateToJDE(t))/15)}function d(t){var e=l(r.DateToJDE(t)),n=f(r.DateToJDE(t)),a=(n-e+720)%360;return Math.floor(a/180)}function p(t,e){var n=l(r.DateToJDE(t)),a=l(r.DateToJDE(e)),o=Math.floor(n/15),s=Math.floor(a/15);return o!=s?s%24:-1}function v(t,e){var n=l(r.DateToJDE(t)),a=l(r.DateToJDE(e)),o=f(r.DateToJDE(t)),s=f(r.DateToJDE(e)),u=(o-n+720)%360,i=(s-a+720)%360,c=Math.floor(u/180),h=Math.floor(i/180);return c!=h?h%2:-1}function m(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());return e.setDate(e.getDate()+1),e}var g=["初一","望"],_=["春分","清明","穀雨","立夏","小滿","芒種","夏至","小暑","大暑","立秋","處暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至","小寒","大寒","立春","雨水","驚蟄"],b=_.filter((function(t,e){return e%2==0}));function y(t,e){return new Date((t.getTime()+e.getTime())/2)}function D(t){for(var e=[],n=new Date(t+1,0,1),a=new Date(t,0,1);a<n;a=m(a)){var r=m(a),o=p(a,r);if(o>=0){var s=new Date(a),u=new Date(r);while(u-s>500){var i=h(s),c=y(s,u),l=h(c);l==i?s=c:u=c}e.push({name:_[o],date:y(s,u)})}}return e}function w(t){for(var e=[],n=new Date(t+1,0,1),a=new Date(t,0,1);a<n;a=m(a)){var r=m(a),o=v(a,r);if(o>=0){var s=new Date(a),u=new Date(r),i=d(s);while(u-s>500){var c=y(s,u),l=d(c);l==i?s=c:u=c}e.push({name:g[o],date:y(s,u)})}}return e}t.exports={jieqi:D,shuoWang:w,ZhongqiNames:b,getTomorrow:m}},"85ec":function(t,e,n){},b2a6:function(t,e,n){n("d3b7");var a=n("3f2a"),r=a.julian,o=a.solar,s=a.planetposition,u=a.data,i=a.moonposition,c=new s.Planet(u.earth),l=149597870.7,f=1737.1,h=696342,d=6378.1;function p(t,e,n){var a=t*Math.cos(n);return[a*Math.cos(e),a*Math.sin(e),t*Math.sin(n)]}function v(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2]))}function m(t){var e=o.apparentVSOP87(c,t);return p(e.range*l,e.lon,e.lat)}function g(t){var e=i.position(t);return p(e.range,e.lon,e.lat)}function _(t,e){for(var n=[],a=0;a<t.length;a++)n.push(t[a]-e[a]);return n}function b(t){return v(t,[0,0,0])}function y(t,e){for(var n=[],a=0;a<e.length;a++)n.push(t*e[a]);return n}function D(t,e){for(var n=[],a=0;a<t.length;a++)n.push(t[a]+e[a]);return n}function w(t,e){for(var n=0,a=0;a<t.length;a++)n+=t[a]*e[a];return n}function x(t,e){return Math.acos(w(t,e)/(b(t)*b(e)))}function T(t,e,n,a,r){var o,s=_(t,n),u=b(s),i=y(-1/u,s),c=a/(e-a)*u,l=D(n,y(c,i));o=r?Math.asin(a/c):a/c;var f,h=a/(e+a)*u;f=r?Math.asin(a/h):a/h;var d=_(n,y(h,i));return{ucenter:l,pcenter:d,uarc:o,parc:f,sodir:i}}function M(t,e,n,a,r,o,s,u,i){if(w(_(n,e),i)<=0)return"O";var c=_(n,o),l=Math.asin(a/b(c)),f=x(_(n,o),i);if(f>u+l)return"O";var h=_(n,r),d=b(h);if(w(h,i)<=0){if(d<=a)return"F";var p=Math.asin(a/d),v=x(h,_([0,0,0],i));return s>p?v<s-p?"G":v<s+p?"F":"P":v<p-s?"D":v<s+p?"F":"P"}if(d<=a)return"F";var m=Math.asin(a/d),g=x(h,i);return m<g?g<s-m?"H":g<s+m?"I":"P":g<m-s?"I":g<s+m?"J":"P"}var S={O:"正常",P:"半影月蝕",F:"月偏食",G:"月全食",D:"月環食",H:"半影月蝕",I:"半影月蝕",J:"半影月蝕"},j={O:"正常",P:"日偏蝕",F:"日全食",G:"全境日全食",D:"日全食",H:"全境日環蝕",I:"日環蝕",J:"日環蝕"};function E(t){var e=[0,0,0],n=m(t),a=g(t),r=h,o=d,s=T(n,r,e,o,!0),u=s.ucenter,i=s.pcenter,c=s.uarc,l=s.parc,p=s.sodir,v=M(n,e,a,1.01*f,u,i,c,l,p);return S[v]}function O(t){var e=g(t),n=m(t),a=[0,0,0],r=h,o=f,s=T(n,r,e,o,!0),u=s.ucenter,i=s.pcenter,c=s.uarc,l=s.parc,p=s.sodir,v=M(n,e,a,d,u,i,c,l,p);return j[v]}var J={solar:O,moon:E};function P(t,e,n){return new Promise((function(a){var o=[],s=new Date(t);s.setSeconds(0);var u=new Date(e);u.setSeconds(0);for(var i=Math.floor((u-s)/6e4),c=r.DateToJDE(s),l=[],f=0;f<=i;f++)l.push({jde:c,date:r.JDEToDate(c),status:n(c)}),c+=1/24/60;o.push({date:l[0].date,status:l[0].status});for(var h=1;h<l.length;h++){var d=l[h-1].status;if(l[h].status!=d){for(var p=r.DateToJDE(l[h-1].date),v=!1,m=1;m<60;m++){p+=1/24/60/60;var g=n(p);if(g!=d){o.push({date:r.JDEToDate(p),status:g}),v=!0;break}}v||o.push({date:l[h].date,status:l[h].status})}}a(o)}))}t.exports={Eclipse:P,eclipseMap:J,julian:r}},b74b:function(t,e,n){"use strict";n("743b")}});
//# sourceMappingURL=app.f1719b2e.js.map