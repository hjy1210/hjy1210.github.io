(function(t){function e(e){for(var a,o,u=e[0],i=e[1],c=e[2],h=0,f=[];h<u.length;h++)o=u[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,u=1;u<n.length;u++){var i=n[u];0!==r[i]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/lunarcalendar/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=i;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02a2":function(t,e,n){n("99af"),n("4de4"),n("caad"),n("c975"),n("d81d"),n("b0c0"),n("d3b7"),n("25f0"),n("2532");var a=n("448a"),r=n("7969"),s=r.jieqi,o=r.shuoWang,u=r.ZhongqiNames,i=r.getTomorrow;function c(t){var e={},n=s(t-1),a=s(t);e.terms=a.map((function(t){return{name:t.name,date:new Date(t.date)}}));var r=s(t+1),u=o(t-1),i=o(t);e.shuoWangs=i.map((function(t){return{name:t.name,date:new Date(t.date)}}));var c=o(t+1),f=h(u,i,c,n,a,r),d=l(f,t);return e.mixedTerms=f,e.calendar=d,e}function l(t,e){for(var n=[],a=0;a<t.length;a++)t[a].month&&("初一"==t[a].names[0]?t[a].day=1:t[a].day=Math.round((t[a].date-t[a-1].date)/864e5)+t[a-1].day,n.push(t[a]));for(var r,s=[],o=0;o<n.length-1;o++){s.push(n[o]),r=i(n[o].date);var u=1;while(r<n[o+1].date)s.push({names:[],month:n[o].month,leap:n[o].leap,day:n[o].day+u,date:r}),u++,r=i(r)}return s.filter((function(t){return t.date.getFullYear()==e}))}function h(t,e,n,r,s,o){for(var u=t.concat(e).concat(n).concat(r).concat(s).concat(o).filter((function(t){return"望"!=t.name})).map((function(t){return t.date.setHours(0,0,0,0),t})).sort((function(t,e){return t.date-e.date})),i=[],c=u[0].date,l=[u[0].name],h=1;h<u.length;h++)u[h].date-c==0?l.push(u[h].name):(i.push({date:c,names:a(l)}),c=u[h].date,l=[u[h].name]);return i.push({date:c,names:a(l)}),d(i),i}function f(t,e,n){for(var a=!1,r=e;r<n;r++)for(var s=0;s<t[r].names.length;s++)if(u.includes(t[r].names[s]))return!0;return a}function d(t){for(var e=[],n=[],a=0;a<t.length;a++)t[a].names.includes("冬至")&&e.push(a),t[a].names.includes("初一")&&n.push(a);for(var r=[],s=0;s<e.length;s++)for(var o=n.length-1;o>=0;o--)if(n[o]<=e[s]){r.push(n[o]);break}for(var u=[],i=0;i<r.length-1;i++){for(var c=0,l=0;l<n.length;l++)n[l]>=r[i]&&n[l]<r[i+1]&&c++;c>12?u.push(!0):u.push(!1)}for(var h=0;h<r.length-1;h++)if(0==u[h])for(var d=10,g=r[h];g<r[h+1];g++)g>r[h]&&t[g].names.includes("初一")&&(d=(d+1)%12),t[g].month=d+1;else for(var p=10,m=!1,v=!1,_=r[h];_<r[h+1];_++){if(_>r[h]&&t[_].names.includes("初一")){var b=n.indexOf(_);f(t,_,n[b+1])||m?(p=(p+1)%12,v=!1):(v=!0,m=!0)}t[_].month=p+1,t[_].leap=v}}function g(t){var e,n=t.date.getDate().toString();return 0==t.names.length||1==t.names.length&&"初一"==t.names[0]?(e="".concat(t.month,"/").concat(t.day),t.leap&&(e="潤"+e)):e=t.names[t.names.length-1],[n,e]}t.exports={createLunarCalendar:c,getTwoRows:g}},"034f":function(t,e,n){"use strict";n("85ec")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("LunarCalendar")],1)},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("陰陽合曆")]),t._v(" 西元年度："),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.year,expression:"year",modifiers:{number:!0}}],staticStyle:{width:"60px"},attrs:{type:"number",disabled:t.busy},domProps:{value:t.year},on:{input:[function(e){e.target.composing||(t.year=t._n(e.target.value))},t.clear],blur:function(e){return t.$forceUpdate()}}}),n("button",{staticStyle:{"font-size":"20pt"},attrs:{disabled:t.busy},on:{click:t.getSeasonWrap}},[t._v("計算")]),n("span",[t._v(t._s(t.message))]),n("section",t._l(t.monthTables,(function(e,a){return n("div",{key:a},[n("table",{staticStyle:{margin:"20px"}},[n("tr",[n("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v(t._s(t.year)+"年"+t._s(a+1)+" 月")])]),t._m(0,!0),t._l(e,(function(e,a){return n("tr",{key:a},t._l(e,(function(e,a){return n("td",{key:a},[n("div",{staticStyle:{"text-align":"center",width:"50px"}},[t._v(t._s(t.getTwoRows(e)[0]))]),n("div",{staticStyle:{"text-align":"center",width:"50px"}},[t._v(t._s(t.getTwoRows(e)[1]))])])})),0)}))],2)])})),0),n("section",[t.terms.length>0?n("table",{staticStyle:{margin:"20px"}},[t._m(1),t._l(t.terms,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.date.getFullYear())+"/"+t._s(e.date.getMonth()+1)+"/"+t._s(e.date.getDate())+" "+t._s(e.date.getHours())+":"+t._s(e.date.getMinutes())+":"+t._s(e.date.getSeconds()))])])}))],2):t._e(),t.shuoWangs.length>0?n("table",{staticStyle:{margin:"20px"}},[t._m(2),t._l(t.shuoWangs,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.date.getFullYear())+"/"+t._s(e.date.getMonth()+1)+"/"+t._s(e.date.getDate())+" "+t._s(e.date.getHours())+":"+t._s(e.date.getMinutes())+":"+t._s(e.date.getSeconds()))])])}))],2):t._e(),t.eclipses.length>0?n("table",{staticStyle:{margin:"20px"}},[t._m(3),t._l(t.eclipses,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.status))]),n("td",[t._v(t._s(e.date.getFullYear())+"/"+t._s(e.date.getMonth()+1)+"/"+t._s(e.date.getDate())+" "+t._s(e.date.getHours())+":"+t._s(e.date.getMinutes())+":"+t._s(e.date.getSeconds()))])])}))],2):t._e()])])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticStyle:{"background-color":"#dddddd"}},[n("td",{staticStyle:{"text-align":"center"}},[t._v("日")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("一")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("二")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("三")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("四")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("五")]),n("td",{staticStyle:{"text-align":"center"}},[t._v("六")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("節氣")]),n("th",[t._v("時刻")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("朔望")]),n("th",[t._v("時刻")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("日月蝕況")]),n("th",[t._v("起始時刻")])])}],i=(n("99af"),n("4de4"),n("fb6a"),n("b0c0"),n("96cf"),n("1da1")),c=n("02a2"),l=n("b2a6"),h={name:"calender",data:function(){return{busy:null,year:2020,terms:[],shuoWangs:[],mixedTerms:[],calendar:[],eclipses:[],message:"按計算鍵開始計算日曆，桌上型瀏覽器約需10秒，手機約需30秒",monthTables:[],myWorker:null}},computed:{},mounted:function(){},created:function(){this.myWorker=this.$worker.create([{message:"message1",func:function(t){return"".concat(t)}},{message:"message2",func:function(t){return"Output 2 "+t}}])},methods:{clear:function(){this.terms=[],this.shuoWangs=[],this.mixedTerms=[],this.calendar=[],this.eclipses=[],this.monthTables=[]},getSeasonWrap:function(){this.message="計算中........",this.busy=!0,setTimeout(this.getSeason,0)},getSeason:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,s,o,u,i,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.myWorker.postMessage("message1",["createLunarCalendar start"]);case 2:return this.message=t.sent,e=Object(c["createLunarCalendar"])(this.year),t.next=6,this.myWorker.postMessage("message1",["createLunarCalendar end"]);case 6:this.message=t.sent,this.terms=e.terms,this.shuoWangs=e.shuoWangs,this.mixedTerms=e.mixedTerms,this.calendar=e.calendar,n=[],a=0;case 13:if(!(a<this.shuoWangs.length)){t.next=36;break}if(r=l["julian"].DateToJDE(this.shuoWangs[a].date),s=l["julian"].JDEToDate(r-.5),o=l["julian"].JDEToDate(r+.5),u=[],"初一"!=this.shuoWangs[a].name){t.next=26;break}return i="計算 ".concat(this.shuoWangs[a].date.getMonth(),"/").concat(this.shuoWangs[a].date.getDate()," 是否發生日蝕"),u=Object(l["Eclipse"])(s,o,l["eclipseMap"].solar),t.next=23,this.myWorker.postMessage("message1",[i]);case 23:this.message=t.sent,t.next=31;break;case 26:return h="計算 ".concat(this.shuoWangs[a].date.getMonth(),"/").concat(this.shuoWangs[a].date.getDate()," 是否發生月蝕"),u=Object(l["Eclipse"])(s,o,l["eclipseMap"].moon),t.next=30,this.myWorker.postMessage("message1",[h]);case 30:this.message=t.sent;case 31:1==u.length&&"正常"==u[0].status&&(u=[]),u.length>0&&(n=n.concat(u));case 33:a++,t.next=13;break;case 36:this.eclipses=n,this.message="按計算鍵開始計算日曆，桌上型瀏覽器約需10秒，手機約需30秒",this.monthTables=this.constructMonthTable(),this.busy=null;case 40:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTwoRows:function(t){return t?Object(c["getTwoRows"])(t):["",""]},constructMonthTable:function(){for(var t=this,e=[],n=function(n){for(var a=[],r=t.calendar.filter((function(t){return t.date.getMonth()==n})),s=[],o=r[0].date.getDay(),u=0;u<o;u++)s.push(null);s=s.concat(r);var i=Math.floor(s.length/7);s.length%7!=0&&(i+=1);for(var c=0;c<i;c++)a.push(s.slice(7*c,7*c+7));e.push(a)},a=0;a<12;a++)n(a);return e}}},f=h,d=(n("b74b"),n("2877")),g=Object(d["a"])(f,o,u,!1,null,null,null),p=g.exports,m={name:"App",components:{LunarCalendar:p}},v=m,_=(n("034f"),Object(d["a"])(v,r,s,!1,null,null,null)),b=_.exports,y=n("28bd");a["a"].use(y["a"]),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(b)}}).$mount("#app")},"743b":function(t,e,n){},7969:function(t,e,n){n("4de4");var a=n("3f2a"),r=a.julian,s=a.solar,o=a.planetposition,u=a.data,i=a.moonposition,c=new o.Planet(u.earth);function l(t){var e=s.apparentVSOP87(c,t).lon;return(180*e/Math.PI+360)%360}function h(t){var e=i.position(t).lon;return(180*e/Math.PI+360)%360}function f(t){return Math.floor(l(r.DateToJDE(t))/15)}function d(t){var e=l(r.DateToJDE(t)),n=h(r.DateToJDE(t)),a=(n-e+720)%360;return Math.floor(a/180)}function g(t,e){var n=l(r.DateToJDE(t)),a=l(r.DateToJDE(e)),s=Math.floor(n/15),o=Math.floor(a/15);return s!=o?o%24:-1}function p(t,e){var n=l(r.DateToJDE(t)),a=l(r.DateToJDE(e)),s=h(r.DateToJDE(t)),o=h(r.DateToJDE(e)),u=(s-n+720)%360,i=(o-a+720)%360,c=Math.floor(u/180),f=Math.floor(i/180);return c!=f?f%2:-1}function m(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());return e.setFullYear(t.getFullYear()),e.setDate(e.getDate()+1),e}var v=["初一","望"],_=["春分","清明","穀雨","立夏","小滿","芒種","夏至","小暑","大暑","立秋","處暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至","小寒","大寒","立春","雨水","驚蟄"],b=_.filter((function(t,e){return e%2==0}));function y(t,e){return new Date((t.getTime()+e.getTime())/2)}function D(t){var e=[],n=new Date(t+1,0,1),a=new Date(t,0,1);for(n.setFullYear(t+1),a.setFullYear(t);a<n;a=m(a)){var r=m(a),s=g(a,r);if(s>=0){var o=new Date(a),u=new Date(r);while(u-o>500){var i=f(o),c=y(o,u),l=f(c);l==i?o=c:u=c}e.push({name:_[s],date:y(o,u)})}}return e}function w(t){var e=[],n=new Date(t+1,0,1),a=new Date(t,0,1);for(n.setFullYear(t+1),a.setFullYear(t);a<n;a=m(a)){var r=m(a),s=p(a,r);if(s>=0){var o=new Date(a),u=new Date(r),i=d(o);while(u-o>500){var c=y(o,u),l=d(c);l==i?o=c:u=c}e.push({name:v[s],date:y(o,u)})}}return e}t.exports={jieqi:D,shuoWang:w,ZhongqiNames:b,getTomorrow:m}},"85ec":function(t,e,n){},b2a6:function(t,e,n){var a=n("3f2a"),r=a.julian,s=a.solar,o=a.planetposition,u=a.data,i=a.moonposition,c=new o.Planet(u.earth),l=149597870.7,h=1737.1,f=696342,d=6378.1;function g(t,e,n){var a=t*Math.cos(n);return[a*Math.cos(e),a*Math.sin(e),t*Math.sin(n)]}function p(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2]))}function m(t){var e=s.apparentVSOP87(c,t);return g(e.range*l,e.lon,e.lat)}function v(t){var e=i.position(t);return g(e.range,e.lon,e.lat)}function _(t,e){for(var n=[],a=0;a<t.length;a++)n.push(t[a]-e[a]);return n}function b(t){return p(t,[0,0,0])}function y(t,e){for(var n=[],a=0;a<e.length;a++)n.push(t*e[a]);return n}function D(t,e){for(var n=[],a=0;a<t.length;a++)n.push(t[a]+e[a]);return n}function w(t,e){for(var n=0,a=0;a<t.length;a++)n+=t[a]*e[a];return n}function M(t,e){return Math.acos(w(t,e)/(b(t)*b(e)))}function x(t,e,n,a,r){var s,o=_(t,n),u=b(o),i=y(-1/u,o),c=a/(e-a)*u,l=D(n,y(c,i));s=r?Math.asin(a/c):a/c;var h,f=a/(e+a)*u;h=r?Math.asin(a/f):a/f;var d=_(n,y(f,i));return{ucenter:l,pcenter:d,uarc:s,parc:h,sodir:i}}function T(t,e,n,a,r,s,o,u,i){if(w(_(n,e),i)<=0)return"O";var c=_(n,s),l=Math.asin(a/b(c)),h=M(_(n,s),i);if(h>u+l)return"O";var f=_(n,r),d=b(f);if(w(f,i)<=0){if(d<=a)return"F";var g=Math.asin(a/d),p=M(f,_([0,0,0],i));return o>g?p<o-g?"G":p<o+g?"F":"P":p<g-o?"D":p<o+g?"F":"P"}if(d<=a)return"F";var m=Math.asin(a/d),v=M(f,i);return m<v?v<o-m?"H":v<o+m?"I":"P":v<m-o?"I":v<o+m?"J":"P"}var S={O:"正常",P:"半影月蝕",F:"月偏食",G:"月全食",D:"月環食",H:"半影月蝕",I:"半影月蝕",J:"半影月蝕"},O={O:"正常",P:"日偏蝕",F:"日全食",G:"全境日全食",D:"日全食",H:"全境日環蝕",I:"日環蝕",J:"日環蝕"};function j(t){var e=[0,0,0],n=m(t),a=v(t),r=f,s=d,o=x(n,r,e,s,!0),u=o.ucenter,i=o.pcenter,c=o.uarc,l=o.parc,g=o.sodir,p=T(n,e,a,1.01*h,u,i,c,l,g);return S[p]}function k(t){var e=v(t),n=m(t),a=[0,0,0],r=f,s=h,o=x(n,r,e,s,!0),u=o.ucenter,i=o.pcenter,c=o.uarc,l=o.parc,g=o.sodir,p=T(n,e,a,d,u,i,c,l,g);return O[p]}var E={solar:k,moon:j};function W(t,e,n){var a=[],s=new Date(t);s.setSeconds(0);var o=new Date(e);o.setSeconds(0);for(var u=Math.floor((o-s)/6e4),i=r.DateToJDE(s),c=[],l=0;l<=u;l++)c.push({jde:i,date:r.JDEToDate(i),status:n(i)}),i+=1/24/60;a.push({date:c[0].date,status:c[0].status});for(var h=1;h<c.length;h++){var f=c[h-1].status;if(c[h].status!=f){for(var d=r.DateToJDE(c[h-1].date),g=!1,p=1;p<60;p++){d+=1/24/60/60;var m=n(d);if(m!=f){a.push({date:r.JDEToDate(d),status:m}),g=!0;break}}g||a.push({date:c[h].date,status:c[h].status})}}return a}t.exports={Eclipse:W,eclipseMap:E,julian:r}},b74b:function(t,e,n){"use strict";n("743b")}});
//# sourceMappingURL=app.a42f5c5f.js.map